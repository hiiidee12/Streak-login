<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Daily Check-in</title>

  <!-- Open Graph -->
  <meta property="og:title" content="Daily Check-in" />
  <meta property="og:description" content="Daily check-in using a wallet transaction on Base." />
  <meta property="og:image" content="https://streak-login.vercel.app/assets/check.jpg" />
  <meta property="og:url" content="https://streak-login.vercel.app/" />
  <meta property="og:type" content="website" />

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Daily Check-in" />
  <meta name="twitter:description" content="Daily check-in using a wallet transaction on Base." />
  <meta name="twitter:image" content="https://streak-login.vercel.app/assets/check.jpg" />

  <!-- Farcaster Mini App -->
  <meta
    name="fc:miniapp"
    content='{"version":"1","imageUrl":"https://streak-login.vercel.app/miniapp-card.png","aspectRatio":"3:2","button":{"title":"Open Daily Check-in","action":{"type":"launch_frame","name":"Daily Check-in","url":"https://streak-login.vercel.app/","splashImageUrl":"https://streak-login.vercel.app/assets/check.jpg","splashBackgroundColor":"#0b0f17"}}}'
  />

  <link rel="stylesheet" href="/css/style.css" />
</head>

<body>
  <div class="container">

    <div class="card">
      <!-- hidden automatically in Mini App -->
      <div class="muted" id="env">Loading...</div>

      <div class="profile">
        <img id="pfp" class="pfp" src="https://streak-login.vercel.app/assets/check.jpg" alt="pfp" />
        <div>
          <div class="profileTop">
            <b id="fcName">-</b>
            <span class="badge" id="fcFid">FID: -</span>
          </div>
          <div class="muted" id="fcUser">@-</div>
        </div>
      </div>

      <div class="hr"></div>

      <h1>Daily Check-in (Wallet Transaction)</h1>
      <div class="muted">
        This demo performs a <b>0 ETH</b> transaction to your own address as a “check-in”.
        <span class="warn"><b>Gas fees apply.</b></span><br />
        Check-in status is stored in <code>localStorage</code> (demo only; not secure without on-chain verification).
      </div>

      <div class="hr"></div>

      <div class="muted">Wallet Address</div>
      <div id="addr" class="badge">Not connected</div>

      <div class="mt10">
        <div class="muted">Network</div>
        <div id="net" class="badge">-</div>
      </div>

      <div class="row">
        <button id="connectBtn">Connect Wallet</button>
        <button id="checkinBtn" disabled>Daily Check-in (Tx)</button>
        <button id="authBtn">Get QuickAuth Token</button>
      </div>

      <div class="mini">Status: <span id="status" class="badge">Idle</span></div>
    </div>

    <div class="card">
      <div class="muted"><b>Notes</b></div>
      <ul class="muted">
        <li>We send a transaction using <code>eth_sendTransaction</code> (EIP-1193).</li>
        <li>We confirm it via Base RPC to avoid unsupported wallet methods.</li>
      </ul>
    </div>

  </div>

  <!-- Toast -->
<div id="toast" class="toast" aria-live="polite" aria-atomic="true">
  <div class="toast-title"></div>
  <div class="toast-msg"></div>
</div>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <div class="modal-header">
        <div>
          <div class="modal-title" id="modalTitle">Success</div>
          <div class="modal-sub" id="modalSub">Transaction sent</div>
        </div>
        <button class="modal-close" id="modalClose" aria-label="Close">✕</button>
      </div>

      <div class="modal-body">
        <div class="muted" style="margin-bottom:8px;">Tx Hash</div>
        <div class="txbox">
          <code id="modalTxHash" class="txhash"></code>
        </div>

        <div class="row" style="margin-top:12px;">
          <button id="copyTxBtn">Copy Hash</button>
          <button id="openExplorerBtn">Open Explorer</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
